// 匯入餐廳訂單資料的腳本
const csv = `編號,發票號碼,載具／捐贈碼,結帳時間,原始單號,外部單號,訂單來源,訂單種類,桌號,服務費,運費,折扣金額細項,發票金額,支付模組,付款資訊,支付備註,目前概況,顧客姓名,顧客電話,訂單備註,品項,訂購人,訂購人電話
0,#-00045753,"",2023-12-01 17:51:46,2312010004,"",內用POS,外帶,"",0.00,0.00,"",4640.00,LINE PYA,"","",已結帳,鄭姐,0937194926,"","鹽蔥豬五花/串*4，野生蛤蠣精力湯*4，炙燒鮭魚親子丼*1，綜合握壽司(8貫)*1，綜合生魚片*2，炙燒比目魚鰭邊(5貫)*1，鹽烤秋刀魚*1，海膽軍艦*1，鮭魚親子丼*1，炙燒鰹魚腹*1，辣味噌湯*1，海葡萄*1，鹽烤香魚*1，醃漬小菜*1，蝦卵軍艦*1，炸牛蒡*1，毛豆*1，海苔*1","",""
1,#-00045754,"",2023-12-01 18:09:08,2312010005,"",內用POS,內用,8,0.00,0.00,"",3060.00,刷卡,"","",已結帳,"","","","鹽蔥豬五花/串*3，野生蛤蠣精力湯*2，綜合握壽司(8貫)*1，綜合生魚片*1，炙燒比目魚鰭邊(5貫)*1，海膽軍艦*1，辣味噌湯*2，醃漬小菜*1，蝦卵軍艦*1，炸牛蒡*1，毛豆*1","",""
2,#-00045755,"",2023-12-01 18:35:55,2312010006,"",內用POS,內用,4,0.00,0.00,"",540.00,刷卡,"","",已結帳,"","","","鹽蔥豬五花/串*2，野生蛤蠣精力湯*2，辣味噌湯*2","",""`;

// 將 CSV 轉換為 JSON
function csvToJson(csv) {
  const lines = csv.split('\n');
  const headers = lines[0].split(',');
  const result = [];
  
  for (let i = 1; i < lines.length; i++) {
    const obj = {};
    const currentLine = lines[i].split(',');
    
    for (let j = 0; j < headers.length; j++) {
      obj[headers[j]] = currentLine[j];
    }
    result.push(obj);
  }
  
  return result;
}

const orderData = csvToJson(csv);
console.log('轉換完成，共', orderData.length, '筆訂單資料');
console.log('範例資料:', JSON.stringify(orderData[0], null, 2));

module.exports = orderData;